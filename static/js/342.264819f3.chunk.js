"use strict";(self.webpackChunkposts_app=self.webpackChunkposts_app||[]).push([[342],{416:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(579);const c={backgroundColor:"#f1f1f1",fontSize:"18px",fontWeight:"500"},l=e=>{let{title:s}=e;return(0,a.jsx)("div",{className:"mb-5",style:c,children:(0,a.jsx)("div",{className:"pt-3 pb-3 text-center",children:s})})}},342:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(416),c=t(43),l=t(216),o=t(475),n=t(154);const r=e=>Object.keys(e).map((s=>encodeURIComponent(s)+"="+encodeURIComponent(e[s]))).join("&");var i=t(579);const m=e=>{let{onSearch:s,initialValues:t}=e;const[a,o]=(0,c.useState)(t),n=(0,l.Zp)(),r=((e,s)=>{let t;return function(){for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];clearTimeout(t),t=setTimeout((()=>e(...c)),s)}})((e=>{n("/posts?searchTerms=".concat(e.target.value)),o(e.target.value)}),400);return(0,i.jsx)("form",{className:"row",onSubmit:e=>{e.preventDefault(),s(a)},children:(0,i.jsxs)("div",{className:"col-lg-12",children:[(0,i.jsx)("label",{htmlFor:"searchByNameInput",className:"form-label",children:"Search posts by user"}),(0,i.jsx)("input",{type:"text",id:"searchByNameInput",placeholder:"Type a name",onChange:r,className:"form-control"})]})})},d=()=>{const[e,s]=(0,c.useState)(!1),t=(e=>{const s=new URLSearchParams(e),t={};return s.forEach(((e,s)=>{t[s]=e})),t})((0,l.zy)().search);return console.log("paramObject",t),console.log(r(t)),(0,c.useEffect)((()=>{console.log("postsData",e),console.log("paramObject",t)}),[t]),(0,c.useEffect)((()=>{(async()=>{try{const e=await n.A.get("https://jsonplaceholder.typicode.com/posts?".concat(r(t)));if(e){const t=e.data.map((e=>"postId=".concat(e.id))).join("&&"),a=await n.A.get("https://jsonplaceholder.typicode.com/comments?".concat(t)),c=[];e.data.forEach((e=>{c.includes(e.userId)||c.push(e.userId)}));const l=c.map((e=>"userId=".concat(e))).join("&&"),o=await n.A.get("https://jsonplaceholder.typicode.com/users?".concat(l));if(a&&o){const t=e.data.map((e=>{const s=a.data.filter((s=>s.postId===e.id)),t=o.data.find((s=>s.id===e.userId));return{...e,comments:s,user:t}}));s(t)}}}catch(e){console.error(e)}})()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{title:"All posts"}),(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)(m,{initialValues:t&&t.searchTerms?t.searchTerms:"",onSearch:()=>console.log("zz")}),(0,i.jsx)("div",{className:"row items mt-4",children:e&&e.map((e=>(0,i.jsx)("div",{className:"col-lg-4 item mb-4",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"User: "}),(0,i.jsx)("small",{children:e.user.name})]}),(0,i.jsx)("h5",{className:"card-title",children:(0,i.jsx)(o.N_,{to:"/post/".concat(e.id),style:{textDecoration:"none",color:"#343434",minHeight:"75px",display:"block"},children:e.title})}),(0,i.jsx)("p",{className:"card-text",style:{minHeight:"48px"},children:e.title}),(0,i.jsx)(o.N_,{to:"/post/".concat(e.id),className:"card-link ",children:"Read more"}),e.comments&&Array.isArray(e.comments)&&e.comments.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"mt-3",children:(0,i.jsx)("small",{children:(0,i.jsx)("strong",{children:"Comments:"})})}),(0,i.jsx)("ul",{className:"post-comments list-group list-group-flush",children:e.comments.map((e=>(0,i.jsxs)("li",{className:"list-group-item",children:[(0,i.jsx)("p",{className:"text-sm",style:{color:"#ccc"},children:(0,i.jsxs)("small",{children:[e.email,":"]})}),(0,i.jsx)("p",{className:"text-sm",children:(0,i.jsx)("small",{children:e.name})})]},e.id)))})]})]})})},e.id)))})]})]})}}}]);
//# sourceMappingURL=342.264819f3.chunk.js.map